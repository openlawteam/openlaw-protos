# Protocol Documentation
<a name="top"></a>

## Table of Contents

- [ExternalService.proto](#ExternalService.proto)
    - [Empty](#integration.framework.openlaw.Empty)
    - [EthereumAddressResponse](#integration.framework.openlaw.EthereumAddressResponse)
    - [ExecuteRequest](#integration.framework.openlaw.ExecuteRequest)
    - [ExecuteResponse](#integration.framework.openlaw.ExecuteResponse)
    - [MarkupInterfaceResponse](#integration.framework.openlaw.MarkupInterfaceResponse)
  
    - [ExecuteResponse.Status](#integration.framework.openlaw.ExecuteResponse.Status)
  
  
    - [ExternalService](#integration.framework.openlaw.ExternalService)
  

- [Scalar Value Types](#scalar-value-types)



<a name="ExternalService.proto"></a>
<p align="right"><a href="#top">Top</a></p>

## ExternalService.proto



<a name="integration.framework.openlaw.Empty"></a>

### Empty
The Empty request message to indicate no data in the request.






<a name="integration.framework.openlaw.EthereumAddressResponse"></a>

### EthereumAddressResponse
The Ethereum Address response message.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| address | [string](#string) |  | The Ethereum public address generated by the External Service. |






<a name="integration.framework.openlaw.ExecuteRequest"></a>

### ExecuteRequest
The Request message to be processed by the External Service.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| callerId | [string](#string) |  | The contractId or flowId string value generated by OpenLaw. e.g: 1a86c0ab-7895-497c-babb-a3c089df1203 |
| actionId | [string](#string) |  | The actionId string value which is an arbitrary content that represents the action that happened in OpenLaw VM. |
| requestId | [string](#string) |  | The requestId string value that represents the request in Integrator Framework. |
| inputJson | [string](#string) |  | The inputJson string value that matches the Input type defined in the Markup Interface. It must be converted from string to json value in order to access its properties. |
| servicePublicAddress | [string](#string) |  | The ethereum public address from the External Service as provided in the EthreumAddressResponse. |






<a name="integration.framework.openlaw.ExecuteResponse"></a>

### ExecuteResponse
The Response message obtained from the executed call.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| callerId | [string](#string) |  | The contractId or flowId string value generated by OpenLaw. e.g: 1a86c0ab-7895-497c-babb-a3c089df1203 |
| actionId | [string](#string) |  | The actionId string value which is an arbitrary content that represents the action that happened in OpenLaw VM. |
| requestId | [string](#string) |  | The requestId string value that represents the request in Integrator Framework. |
| outputJson | [string](#string) |  | The outputJson as string value that matches the Output type defined in the Markup Interface. All values of the json must be String and the json must have no spaces. e.g: - {&#34;currency&#34;:&#34;BRL&#34;,&#34;price&#34;:&#34;29.03&#34;,&#34;update&#34;:&#34;2019-09-10T16:31:00.000Z&#34;} - {&#34;param1&#34;:&#34;value1&#34;,&#34;param2&#34;:&#34;value2&#34;,&#34;paramN&#34;:&#34;valueN&#34;} |
| outputSignature | [string](#string) |  | The output signature string which represents the signature of the outputJson field. The stringified version of the outputJson must be used for signature. |
| status | [ExecuteResponse.Status](#integration.framework.openlaw.ExecuteResponse.Status) |  | The status of the execution. If not provided, the default is FAILURE. |
| message | [string](#string) |  | The message returned by the External Service to indicate if the execution was completed with success or not. It can be an error message as well. |
| servicePublicAddress | [string](#string) |  | The ethereum public address from the External Service as provided in the EthereumAddressResponse. |
| statusCode | [uint32](#uint32) |  | Optional attribute to indicate the HTTP status code that must be handled differently by the OpenLaw Integration Framework. For instance, if a storage service attempts to read a file and the file doesn&#39;t exist one can return 404 to indicate that operation has failed with a specific cause, so the integration service will propagate that error to OpenLaw platform. |






<a name="integration.framework.openlaw.MarkupInterfaceResponse"></a>

### MarkupInterfaceResponse
The Markup Interface response message.


| Field | Type | Label | Description |
| ----- | ---- | ----- | ----------- |
| definition | [string](#string) |  | The Markup Interface definition that matches the OpenLaw Input/Output structures. |





 


<a name="integration.framework.openlaw.ExecuteResponse.Status"></a>

### ExecuteResponse.Status
The possible statuses of the response after the execution is 
terminated.

| Name | Number | Description |
| ---- | ------ | ----------- |
| FAILURE | 0 |  |
| SUCCESS | 1 |  |


 

 


<a name="integration.framework.openlaw.ExternalService"></a>

### ExternalService
ExternalService definition parsed by the Protoc Compiler. It must be extended by the server implementation,
so it can respond to gRPC requests from OpenLaw Integration Framework.

| Method Name | Request Type | Response Type | Description |
| ----------- | ------------ | ------------- | ------------|
| GetEthereumAddress | [Empty](#integration.framework.openlaw.Empty) | [EthereumAddressResponse](#integration.framework.openlaw.EthereumAddressResponse) | Gets the Ethereum Public Address from the service which is used to verify events sent from the service to OpenLaw VM. |
| GetMarkupInterface | [Empty](#integration.framework.openlaw.Empty) | [MarkupInterfaceResponse](#integration.framework.openlaw.MarkupInterfaceResponse) | Gets the server Markup Interface definition which is used in a OpenLaw Agreement with ExternalCall or ExternalSignature variable types. The expected Markup Interface definition must follow the standard: - [[Input:Structure(inputField1: &lt;Type&gt;; inputField2: &lt;Type&gt;; inputFieldN: &lt;Type&gt;)]] [[Output:Structure(outputField1: &lt;Type&gt;; outputField2: &lt;Type&gt;; outputFieldN: &lt;Type&gt;)]] - &lt;Type&gt; - can be replaced by: Text, Number and Date. Basic Markup Interface for the Coin Market Cap service can be defined as a String of value: - &#34;[[Input:Structure(fromCurrency: Text; toCurrency: Text; amount: Number)]] [[Output:Structure(currency: Text; price: Number; lastUpdate: Text)]]&#34; The standard Markup Interface for any e-Signature service is defined by the following String value: - &#34;[[Input:Structure(signerEmail: Text; contractContentBase64: Text; contractTitle: Text)]] [[Output:Structure(signerEmail: Text; signature: Text; recordLink: Text)]]&#34; Any e-Signature service must use the exact same Markup Interface as described above, otherwise the e-Signature will not be validated by the OpenLaw VM. |
| Execute | [ExecuteRequest](#integration.framework.openlaw.ExecuteRequest) | [ExecuteResponse](#integration.framework.openlaw.ExecuteResponse) | Executes the request from OpenLaw Integrator Framework and waits for the External Service response. |

 



## Scalar Value Types

| .proto Type | Notes | C++ Type | Java Type | Python Type |
| ----------- | ----- | -------- | --------- | ----------- |
| <a name="double" /> double |  | double | double | float |
| <a name="float" /> float |  | float | float | float |
| <a name="int32" /> int32 | Uses variable-length encoding. Inefficient for encoding negative numbers – if your field is likely to have negative values, use sint32 instead. | int32 | int | int |
| <a name="int64" /> int64 | Uses variable-length encoding. Inefficient for encoding negative numbers – if your field is likely to have negative values, use sint64 instead. | int64 | long | int/long |
| <a name="uint32" /> uint32 | Uses variable-length encoding. | uint32 | int | int/long |
| <a name="uint64" /> uint64 | Uses variable-length encoding. | uint64 | long | int/long |
| <a name="sint32" /> sint32 | Uses variable-length encoding. Signed int value. These more efficiently encode negative numbers than regular int32s. | int32 | int | int |
| <a name="sint64" /> sint64 | Uses variable-length encoding. Signed int value. These more efficiently encode negative numbers than regular int64s. | int64 | long | int/long |
| <a name="fixed32" /> fixed32 | Always four bytes. More efficient than uint32 if values are often greater than 2^28. | uint32 | int | int |
| <a name="fixed64" /> fixed64 | Always eight bytes. More efficient than uint64 if values are often greater than 2^56. | uint64 | long | int/long |
| <a name="sfixed32" /> sfixed32 | Always four bytes. | int32 | int | int |
| <a name="sfixed64" /> sfixed64 | Always eight bytes. | int64 | long | int/long |
| <a name="bool" /> bool |  | bool | boolean | boolean |
| <a name="string" /> string | A string must always contain UTF-8 encoded or 7-bit ASCII text. | string | String | str/unicode |
| <a name="bytes" /> bytes | May contain any arbitrary sequence of bytes. | string | ByteString | str |

